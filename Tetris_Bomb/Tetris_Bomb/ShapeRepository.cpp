#include "ShapeRepository.h"

namespace Tetris {
    const ShapeRepository::ShapeRotations& ShapeRepository::getShape(int type) {
        // 데이터가 너무 길어 생략하지 않고 여기에 다 넣습니다.
        static const std::array<ShapeRotations, 8> shapes = { { // 크기를 7에서 8로 변경
                // Type 0: I-Shape
                {{ {{0,1,0,0, 0,1,0,0, 0,1,0,0, 0,1,0,0}}, {{0,0,0,0, 1,1,1,1, 0,0,0,0, 0,0,0,0}}, {{0,0,1,0, 0,0,1,0, 0,0,1,0, 0,0,1,0}}, {{0,0,0,0, 0,0,0,0, 1,1,1,1, 0,0,0,0}} }},
                // Type 1: Square
                {{ {{1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0}}, {{1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0}}, {{1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0}}, {{1,1,0,0, 1,1,0,0, 0,0,0,0, 0,0,0,0}} }},
                // Type 2: T-Shape
                {{ {{0,1,0,0, 1,1,0,0, 0,1,0,0, 0,0,0,0}}, {{1,1,1,0, 0,1,0,0, 0,0,0,0, 0,0,0,0}}, {{1,0,0,0, 1,1,0,0, 1,0,0,0, 0,0,0,0}}, {{0,1,0,0, 1,1,1,0, 0,0,0,0, 0,0,0,0}} }},
                // Type 3: L-Shape
                {{ {{1,1,0,0, 0,1,0,0, 0,1,0,0, 0,0,0,0}}, {{1,1,1,0, 1,0,0,0, 0,0,0,0, 0,0,0,0}}, {{1,0,0,0, 1,0,0,0, 1,1,0,0, 0,0,0,0}}, {{0,0,1,0, 1,1,1,0, 0,0,0,0, 0,0,0,0}} }},
                // Type 4: J-Shape
                {{ {{1,1,0,0, 1,0,0,0, 1,0,0,0, 0,0,0,0}}, {{1,0,0,0, 1,1,1,0, 0,0,0,0, 0,0,0,0}}, {{0,1,0,0, 0,1,0,0, 1,1,0,0, 0,0,0,0}}, {{1,1,1,0, 0,0,1,0, 0,0,0,0, 0,0,0,0}} }},
                // Type 5: Z-Shape
                {{ {{1,1,0,0, 0,1,1,0, 0,0,0,0, 0,0,0,0}}, {{0,1,0,0, 1,1,0,0, 1,0,0,0, 0,0,0,0}}, {{1,1,0,0, 0,1,1,0, 0,0,0,0, 0,0,0,0}}, {{0,1,0,0, 1,1,0,0, 1,0,0,0, 0,0,0,0}} }},
                // Type 6: S-Shape
                {{ {{0,1,1,0, 1,1,0,0, 0,0,0,0, 0,0,0,0}}, {{1,0,0,0, 1,1,0,0, 0,1,0,0, 0,0,0,0}}, {{0,1,1,0, 1,1,0,0, 0,0,0,0, 0,0,0,0}}, {{1,0,0,0, 1,1,0,0, 0,1,0,0, 0,0,0,0}} }},
                // [추가] Type 7: Bomb (1x1 center dot)
                // 4x4 격자의 (1,1) 위치에 점 하나
                {{ {{0,0,0,0, 0,1,0,0, 0,0,0,0, 0,0,0,0}}, {{0,0,0,0, 0,1,0,0, 0,0,0,0, 0,0,0,0}}, {{0,0,0,0, 0,1,0,0, 0,0,0,0, 0,0,0,0}}, {{0,0,0,0, 0,1,0,0, 0,0,0,0, 0,0,0,0}} }}
            } };
        return shapes[type];
    }

    Color ShapeRepository::getColorForType(int type) {
        static const Color colors[] = {
            Color::RED, Color::BLUE, Color::SKY_BLUE, Color::WHITE,
            Color::YELLOW, Color::VIOLET, Color::GREEN,
            Color::DARK_RED // [추가] 폭탄 색상
        };
        return colors[type % 8]; // 모듈러 연산 8로 변경
    }
}